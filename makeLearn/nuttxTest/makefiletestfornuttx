-include ~/src/downSrc/nuttxspace/nuttx/tools/Makefile.unix
CROSSDEV ?= arm-none-eabi-
MKDEP = $(TOPDIR)/tools/mkdeps$(HOSTEXEEXT)
ARCHINCLUDES = -I. -isystem $(TOPDIR)/include
ARCHXXINCLUDES = -I. -isystem $(TOPDIR)/include -isystem $(TOPDIR)/include/cxx
ARCHSCRIPT = -T$(TOPDIR)/configs/$(CONFIG_ARCH_BOARD)/scripts/$(LDSCRIPT)
CC = $(CROSSDEV)gcc
CXX = $(CROSSDEV)g++
CPP = $(CROSSDEV)gcc -E
LD = $(CROSSDEV)ld
STRIP = $(CROSSDEV)strip --strip-unneeded
AR = $(CROSSDEV)ar rcs
NM = $(CROSSDEV)nm
OBJCOPY = $(CROSSDEV)objcopy
OBJDUMP = $(CROSSDEV)objdump

ARCHCCVERSION = ${shell $(CC) -v 2>&1 | sed -n '/^gcc version/p' | sed -e 's/^gcc version \([0-9\.]\)/\1/g' -e 's/[-\ ].*//g' -e '1q'}
ARCHCCMAJOR = ${shell echo $(ARCHCCVERSION) | cut -d'.' -f1}
                         
ifeq ($(CONFIG_DEBUG_SYMBOLS),y)
  ARCHOPTIMIZATION = -g        
endif                          
                         
ifneq ($(CONFIG_DEBUG_NOOPT),y)                             
  ARCHOPTIMIZATION += $(MAXOPTIMIZATION) -fno-strict-aliasing -fno-strength-reduce -fomit-frame-pointer
endif                    
                         
ARCHCFLAGS = -fno-builtin                                                                                                                    
ARCHCXXFLAGS = -fno-builtin -fno-exceptions -fcheck-new
ARCHWARNINGS = -Wall -Wstrict-prototypes -Wshadow -Wundef
ARCHWARNINGSXX = -Wall -Wshadow -Wundef 
ARCHDEFINES =                  
ARCHPICFLAGS = -fpic -msingle-pic-base -mpic-register=r10
                         
CFLAGS = $(ARCHCFLAGS) $(ARCHWARNINGS) $(ARCHOPTIMIZATION) $(ARCHCPUFLAGS) $(ARCHINCLUDES) $(ARCHDEFINES) $(EXTRADEFINES) -pipe
CPICFLAGS = $(ARCHPICFLAGS) $(CFLAGS)   
CXXFLAGS = $(ARCHCXXFLAGS) $(ARCHWARNINGSXX) $(ARCHOPTIMIZATION) $(ARCHCPUFLAGS) $(ARCHXXINCLUDES) $(ARCHDEFINES) $(EXTRADEFINES) -pipe
CXXPICFLAGS = $(ARCHPICFLAGS) $(CXXFLAGS)      
CPPFLAGS = $(ARCHINCLUDES) $(ARCHDEFINES) $(EXTRADEFINES)
AFLAGS = $(CFLAGS) -D__ASSEMBLY__       
                         
NXFLATLDFLAGS1 = -r -d -warn-common    
NXFLATLDFLAGS2 = $(NXFLATLDFLAGS1) -T$(TOPDIR)/binfmt/libnxflat/gnu-nxflat-pcrel.ld -no-check-sections
LDNXFLATFLAGS = -e main -s 2048
                         
ASMEXT = .S                    
OBJEXT = .o                    
LIBEXT = .a                    
EXEEXT =                       
                         
ifneq ($(CROSSDEV),arm-nuttx-elf-)     
  LDFLAGS += -nostartfiles -nodefaultlibs      
endif                          
ifeq ($(CONFIG_DEBUG_SYMBOLS),y)       
  LDFLAGS += -g                
endif                          
                         
                         
HOSTCC = gcc                   
HOSTINCLUDES = -I.             
HOSTCFLAGS = -Wall -Wstrict-prototypes -Wshadow -Wundef -g -pipe
HOSTLDFLAGS =       

all:

test:
	@echo "ARCHCCVERSION:$(ARCHCCVERSION)"
	@echo "ARCHINCLUDES:$(ARCHINCLUDES)"
	@echo "MKDEP:$(MKDEP)"
	@echo "CFLAGS: $(CFLAGS)"
	@echo "CPICFLAGS: $(CPICFLAGS)"
	@echo "CXXFLAGS: $(CXXFLAGS)"
	@echo "CXXPICFLAGS: $(CXXPICFLAGS)"
	@echo "CPPFLAGS: $(CPPFLAGS)"
	@echo "AFLAGS: $(AFLAGS)\n"
	@echo "TOPDIR: $(TOPDIR)"

.PHONY: test all
